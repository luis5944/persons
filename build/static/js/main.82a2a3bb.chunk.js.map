{"version":3,"sources":["data.js","App.js","index.js"],"names":["URL","getAllData","a","axios","get","data","postPersona","persons","setPersons","newPerson","post","App","useState","newName","setNewName","newPhone","setNewPhone","search","setSearch","add","setAdd","error","setError","algo","className","useEffect","getData","onSubmit","e","preventDefault","undefined","person","find","p","name","console","log","put","id","number","length","Math","max","map","postPerson","setTimeout","value","onChange","target","type","onClick","delete","filter","pe","toLocaleLowerCase","includes","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.82a2a3bb.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst URL = \"/api/persons\";\r\n\r\nconst getAllData = async () => {\r\n  const { data } = await axios.get(URL);\r\n  return data;\r\n};\r\nconst postPersona = async (persons, setPersons, newPerson) => {\r\n  await axios.post(URL, newPerson);\r\n  setPersons([...persons, newPerson]);\r\n};\r\n\r\nexport { getAllData, postPersona };\r\n","import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { getAllData, postPersona } from \"./data\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [add, setAdd] = useState(false);\n  const [error, setError] = useState(\"\");\n  const algo = <div className=\"add\">{newName} added</div>;\n  useEffect(() => {\n    const getData = async () => {\n      const data = await getAllData();\n      setPersons(data);\n    };\n    getData();\n  }, [setPersons]);\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    const person = persons.find((p) => p.name === newName);\n    if (person !== undefined) {\n      console.log(person);\n      await axios.put(`http://localhost:3001/api/persons/${person.id}`, {\n        name: person.name,\n        number: newPhone,\n      });\n      const data = await getAllData();\n      setPersons(data);\n      return;\n    }\n\n    const generateId = () => {\n      const maxId =\n        persons.length > 0 ? Math.max(...persons.map((p) => p.id)) : 0;\n      return maxId + 1;\n    };\n    const newPerson = { id: generateId, name: newName, number: newPhone };\n\n    const postPerson = async () => {\n      await postPersona(persons, setPersons, newPerson);\n    };\n    setAdd(true);\n    setTimeout(() => setAdd(false), 2000);\n    postPerson();\n  };\n  const handleChange = (e) => {\n    setNewName(e.target.value);\n  };\n  const handleChangePhone = (e) => {\n    setNewPhone(e.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {error !== \"\" ? <div className=\"error\">${error}</div> : \"\"}\n      {add ? algo : \"\"}\n      Search:{\" \"}\n      <input\n        value={search}\n        onChange={(e) => {\n          setSearch(e.target.value);\n        }}\n      />\n      <form onSubmit={onSubmit}>\n        <h1>Add new</h1>\n        <div>\n          name:{\" \"}\n          <input\n            type=\"text\"\n            id=\"name\"\n            value={newName}\n            onChange={handleChange}\n            name=\"name\"\n          />\n          <div>\n            number:{\" \"}\n            <input\n              type=\"text\"\n              value={newPhone}\n              onChange={handleChangePhone}\n              name=\"number\"\n            />\n          </div>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      {search === \"\"\n        ? persons.map((p) => (\n            <div key={p.id}>\n              <p>\n                {p.name} - {p.number}\n              </p>\n              <button\n                onClick={async () => {\n                  try {\n                    await axios.delete(\n                      `http://localhost:3001/api/persons/${p.id}`\n                    );\n                    setPersons(persons.filter((pe) => pe.id !== p.id));\n                  } catch (e) {\n                    console.log(\"hola\");\n                    setError(p.name);\n                  }\n                }}\n              >\n                delete\n              </button>\n            </div>\n          ))\n        : persons\n            .filter((p) => p.name.toLocaleLowerCase().includes(search))\n            .map((p) => (\n              <div key={p.id}>\n                <p>\n                  {p.name} - {p.number}\n                </p>\n                <button\n                  onClick={async () => {\n                    try {\n                      await axios.delete(\n                        `http://localhost:3001/api/persons/${p.id}`\n                      );\n                      setPersons(persons.filter((pe) => pe.id !== p.id));\n                    } catch (e) {\n                      console.log(\"hola\");\n                      setError(p.name);\n                    }\n                  }}\n                >\n                  delete\n                </button>\n              </div>\n            ))}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}